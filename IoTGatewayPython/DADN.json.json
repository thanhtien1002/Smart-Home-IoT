{"mode":"block","xmlText":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"+yAh~RPygaDO7)X}FJ}+\">cmd</variable></variables><block type=\"yolobit_basic_forever\" id=\"w5Bl*-!,Ihc8X2tI)wP*\" x=\"-488\" y=\"-363\"><statement name=\"ONSTART\"><block type=\"yolobit_basic_scroll_text\" id=\"rE{9HWN-Gwk1c#?{JSs`\"><value name=\"message\"><shadow type=\"text\" id=\"9?h_j,Z~Fg3!dowLyQSu\"><field name=\"TEXT\">IOT</field></shadow></value><next><block type=\"aiot_led_tiny_set_all\" id=\"SQ_v?BXcd@=,,{P#_zc[\"><field name=\"port\">pin0</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"vY-j{LDtG+1`|-LyPtn-\"><field name=\"COLOUR\">#000000</field></shadow></value></block></next></block></statement><statement name=\"FOREVER\"><block type=\"yolobit_events_run\" id=\"umdCqdRV:x58U19%S0dp\"><next><block type=\"yolobit_basic_sleep\" id=\"5`86jDJJb|*%!]|9`x1_\"><value name=\"duration\"><shadow type=\"math_number\" id=\"CPI+m:1?f/eQx=cJO$2-\"><field name=\"NUM\">1000</field></shadow></value></block></next></block></statement></block><block type=\"yolobit_events_timer\" id=\"]Aw?_R/T!3wr2oa?l35P\" x=\"587\" y=\"-337\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"M4~Biw3I#-`[H]L_a=M}\"><field name=\"NUM\">0.5</field></shadow></value><statement name=\"ACTION\"><block type=\"variables_set\" id=\"scZUDkpJGcJQ{J_Q+aO[\"><field name=\"VAR\" id=\"+yAh~RPygaDO7)X}FJ}+\">cmd</field><value name=\"VALUE\"><block type=\"yolobit_device_read_terminal\" id=\",}aHO%?gZ~y89L;zB%!%\"></block></value><next><block type=\"xbot_serial_write_string\" id=\"7|el;GwqD/i2D7G^muMv\"><value name=\"string\"><shadow type=\"text\" id=\"9LJ,U(dP-!*~{(+]QqSH\"><field name=\"TEXT\"> </field></shadow><block type=\"variables_get\" id=\"+Wx.lKzK^c,iL?=a`hg}\"><field name=\"VAR\" id=\"+yAh~RPygaDO7)X}FJ}+\">cmd</field></block></value><next><block type=\"controls_if\" id=\"rNyuK#*y-G!;u6v8}]J=\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"g-ft@gu@rXq-G)%AiU%n\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"Y,s!DXNN6|_H(^Hm{N?d\"><field name=\"VAR\" id=\"+yAh~RPygaDO7)X}FJ}+\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"e-}H|y{-/-+/fvB1-GO2\"><field name=\"TEXT\">1</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_led_tiny_set_all\" id=\"xrCi)qvHGd*+?OUKr=+n\"><field name=\"port\">pin0</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"R|ePw4@be!6{iZ*ldE~6\"><field name=\"COLOUR\">#ff0000</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"c.!8xr@4mN?+T-s[MyDn\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"G}EOnVo1t^:=dw~z6W(z\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"4)5,5=|rERLb.:6Y4.v~\"><field name=\"VAR\" id=\"+yAh~RPygaDO7)X}FJ}+\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"XeaMb-M9y~$L%P[yXU.:\"><field name=\"TEXT\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_led_tiny_set_all\" id=\"g!p9oY7X7AEq??Gt/~O:\"><field name=\"port\">pin0</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"d^^k%+*_`0I-^~R6UmV)\"><field name=\"COLOUR\">#000000</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"(h.+W%y8qKkv_P2nU-S7\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"/2*%wanM,AYIhcr|p+(;\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"nR$TK*h%|3vzoW}WgJ!F\"><field name=\"VAR\" id=\"+yAh~RPygaDO7)X}FJ}+\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"?,G17|l?;Sv{d;Taum@8\"><field name=\"TEXT\">2</field></block></value></block></value><statement name=\"DO0\"><block type=\"yolobit_pin_servo_write_angle\" id=\"}=Ypn1bFs)A#FN3j38+$\"><field name=\"pin\">10</field><value name=\"angle\"><shadow type=\"math_number\" id=\":/%229/+[b%i;o_uRV!.\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"QZ17wWVi_eGr4:^H(7Im\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"Sd^.ikgt%m:M7G|*ZEj|\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\".d%V)J)AtP}ZHwH|fdh[\"><field name=\"VAR\" id=\"+yAh~RPygaDO7)X}FJ}+\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"zOmj)WF6e:gE7UCq,icy\"><field name=\"TEXT\">3</field></block></value></block></value><statement name=\"DO0\"><block type=\"yolobit_pin_servo_write_angle\" id=\"I]$1V1bmL-i(URCy$J5]\"><field name=\"pin\">10</field><value name=\"angle\"><shadow type=\"math_number\" id=\"_+px}N8Aj.xy|:*Dw29S\"><field name=\"NUM\">90</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"rd:op!ix/wQ1tk6msck~\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"I@+DLDSeOEQr_S@(78oz\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"V?p7:zunQ|W6XG3fzmIV\"><field name=\"VAR\" id=\"+yAh~RPygaDO7)X}FJ}+\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"?=k1=FDqL}q}gWPdK{6f\"><field name=\"TEXT\">4</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"1uv/7[{bn2,Mv^UFPEE[\"><field name=\"NAME\">pin1</field><value name=\"percent\"><shadow type=\"math_number\" id=\"?3L]8G38tB0DQY?P=PiK\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"e(_Y3@Clw]*)4?2PA6T.\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"M+6S$/P-l+aX0Hi,l#T2\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"`Df2/KZ2N5b[2MA201T!\"><field name=\"VAR\" id=\"+yAh~RPygaDO7)X}FJ}+\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\")j/cL=|QjZq%LZX3$sid\"><field name=\"TEXT\">5</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"~X;,K5w;w`7l4g%hN]^M\"><field name=\"NAME\">pin1</field><value name=\"percent\"><shadow type=\"math_number\" id=\"}P|JmEpqk5NOt;d88]M,\"><field name=\"NUM\">70</field></shadow></value></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"yolobit_events_timer\" id=\"-veW8TXNGYk_K8{Lf_Mk\" x=\"-487\" y=\"-38\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"F)=@VN|9eoA=Gjkh#hrH\"><field name=\"NUM\">8</field></shadow></value><statement name=\"ACTION\"><block type=\"aiot_dht_measure\" id=\"d)!6%fRX6_5!AY)!]bRy\"><next><block type=\"xbot_serial_write_string\" id=\"G[ejR*Lbfz8DK;=g)5n@\"><value name=\"string\"><shadow type=\"text\" id=\"*/=tU9n@[-f2F`c.+5({\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"U%]c|u5*kujCq=%2*hmr\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"b~Z8OfE!:Jm5{/6T$^4a\"><field name=\"TEXT\">!T:</field></block></value><value name=\"ADD1\"><block type=\"aiot_dht_read\" id=\"d[w77]ELk,|DP*3V(crk\"><field name=\"DATA\">TEMP</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"q5hG@WdZ:FF4NZzdyP*j\"><field name=\"TEXT\">#</field></block></value></block></value><next><block type=\"xbot_serial_write_string\" id=\"W:@a*py;?44wAc?5q`b.\"><value name=\"string\"><shadow type=\"text\" id=\"*/=tU9n@[-f2F`c.+5({\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"5T7!iondpT~hy$qnzIuH\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"XZ3^kL=O8RKYR#xcDR-H\"><field name=\"TEXT\">!H:</field></block></value><value name=\"ADD1\"><block type=\"aiot_dht_read\" id=\"sTMmSA$_)-F#FN*`GxRR\"><field name=\"DATA\">HUMID</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"Jm9:v#e$tQEC$.z|WC*Y\"><field name=\"TEXT\">#</field></block></value></block></value><next><block type=\"xbot_serial_write_string\" id=\"E+ohp^MZZx`0ovwOqpg_\"><value name=\"string\"><shadow type=\"text\" id=\"*/=tU9n@[-f2F`c.+5({\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"SXH%,!i_vJ1{Wc0G*5;l\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"nKW8DX[Ta3HmY62?!aJ@\"><field name=\"TEXT\">!L:</field></block></value><value name=\"ADD1\"><block type=\"aiot_light_sensor\" id=\"0=dV%l#gqprAsNQa5m8f\"><field name=\"NAME\">pin2</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"tN{$d|]{T(rzp6zH+^I7\"><field name=\"TEXT\">#</field></block></value></block></value><next><block type=\"aiot_lcd1602_display\" id=\"4G.G,8Kk1[R70N8wE{VW\"><value name=\"string\"><shadow type=\"text\" id=\"{Kr/rwgZ/38[nI(MmB*c\"><field name=\"TEXT\">NHIET DO:</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"LzCIhds#ySCl4H7AwgT#\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"kdUn=tfx*$mz$WKV8F67\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"aiot_lcd1602_display\" id=\"sNc1fMafU$/@HV#[iZO;\"><value name=\"string\"><shadow type=\"text\" id=\"MC4k~O6}|L=n;gTLi9)2\"><field name=\"TEXT\"></field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\":}G*{LTQ[iwwe.IPNB,y\"><field name=\"NUM\">10</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"1_dBg8P9H3aABQ+1B^~i\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"aiot_dht_measure\" id=\"0wwkYQ79fn4W)vQmjPnc\"><next><block type=\"aiot_lcd1602_display\" id=\"_(946d+3Rfpjji-fw242\"><value name=\"string\"><shadow type=\"text\" id=\"qgWA0{-Otfio*|c7VARI\"><field name=\"TEXT\"></field></shadow><block type=\"text_join\" id=\"Ua/hcku]+YW8IjYVVzT5\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"aiot_dht_read\" id=\"IUi!]e#W(=C`u*ggxiwS\"><field name=\"DATA\">TEMP</field></block></value><value name=\"ADD1\"><block type=\"text\" id=\";4t(ef7[0Y+0T=W.v*F?\"><field name=\"TEXT\">*C</field></block></value></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"sCgJ@A=/z?RSOY{g829/\"><field name=\"NUM\">10</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"$IGSeNd1+JEsE.8yV^{.\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"aiot_lcd1602_display\" id=\"qACqX8;2+18z5Qfn.:p)\"><value name=\"string\"><shadow type=\"text\" id=\"s?Dlc({]sTGIDJY7O[1i\"><field name=\"TEXT\">DO AM:</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"O]WK]]TI~t|yY`1@)3O8\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"_g^;;+D;2T6N2B}PE#Ol\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"aiot_lcd1602_display\" id=\"=zO~q0PmBG5vKPS0]kgv\"><value name=\"string\"><shadow type=\"text\" id=\"^7Hjl)7Pj?f)rSoE1R6E\"><field name=\"TEXT\"></field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"?l^h/(#(BCg_V~!wDJvO\"><field name=\"NUM\">10</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"q7hLDd18Bl#9da9V|5EO\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"aiot_lcd1602_display\" id=\"rLn9KT{6//8sTuzD+E:^\"><value name=\"string\"><shadow type=\"text\" id=\"!ALIO.0vK?tcm4]}Ryag\"><field name=\"TEXT\"></field></shadow><block type=\"text_join\" id=\"pz0{BDq6bOVO1K%%[r9H\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"aiot_dht_read\" id=\";KHS4^EHR?eX2Zy~|8*=\"><field name=\"DATA\">HUMID</field></block></value><value name=\"ADD1\"><block type=\"text\" id=\"Ah~a}Hj0tFuCQsh6bP-j\"><field name=\"TEXT\">%</field></block></value></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"pv#W!S(%yy+NPAkYFhEw\"><field name=\"NUM\">10</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"QQdXg`$cs=Bv28*?C`)T\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>","python":"from yolobit import *\nbutton_a.on_pressed = None\nbutton_b.on_pressed = None\nbutton_a.on_pressed_ab = button_b.on_pressed_ab = -1\nfrom aiot_rgbled import RGBLed\nfrom event_manager import *\nimport time\nimport sys\nimport uselect\nfrom machine import Pin, SoftI2C\nfrom aiot_dht20 import DHT20\nfrom aiot_lcd1602 import LCD1602\n\ntiny_rgb = RGBLed(pin0.pin, 4)\n\nevent_manager.reset()\n\ndef read_terminal_input():\n  spoll=uselect.poll()        # Set up an input polling object.\n  spoll.register(sys.stdin, uselect.POLLIN)    # Register polling object.\n\n  input = ''\n  if spoll.poll(0):\n    input = sys.stdin.read(1)\n\n    while spoll.poll(0):\n      input = input + sys.stdin.read(1)\n\n  spoll.unregister(sys.stdin)\n  return input\n\ndef on_event_timer_callback_A_w_R_T_w():\n  global cmd\n  cmd = read_terminal_input()\n  print(cmd, end =' ')\n  if cmd == '1':\n    tiny_rgb.show(0, hex_to_rgb('#ff0000'))\n  if cmd == '0':\n    tiny_rgb.show(0, hex_to_rgb('#000000'))\n  if cmd == '2':\n    pin10.servo_write(0)\n  if cmd == '3':\n    pin10.servo_write(90)\n  if cmd == '4':\n    pin1.write_analog(round(translate(0, 0, 100, 0, 1023)))\n  if cmd == '5':\n    pin1.write_analog(round(translate(70, 0, 100, 0, 1023)))\n\nevent_manager.add_timer_event(500, on_event_timer_callback_A_w_R_T_w)\n\naiot_dht20 = DHT20()\n\naiot_lcd1602 = LCD1602()\n\ndef on_event_timer_callback_v_e_W_T_X():\n  global cmd\n  aiot_dht20.read_dht20()\n  print((''.join([str(x) for x in ['!T:', aiot_dht20.dht20_temperature(), '#']])), end =' ')\n  print((''.join([str(x2) for x2 in ['!H:', aiot_dht20.dht20_humidity(), '#']])), end =' ')\n  print((''.join([str(x3) for x3 in ['!L:', round(translate((pin2.read_analog()), 0, 4095, 0, 100)), '#']])), end =' ')\n  aiot_lcd1602.move_to(0, 0)\n  aiot_lcd1602.putstr('NHIET DO:')\n  aiot_lcd1602.move_to(10, 0)\n  aiot_lcd1602.putstr('')\n  aiot_dht20.read_dht20()\n  aiot_lcd1602.move_to(10, 0)\n  aiot_lcd1602.putstr((str(aiot_dht20.dht20_temperature()) + '*C'))\n  aiot_lcd1602.move_to(0, 1)\n  aiot_lcd1602.putstr('DO AM:')\n  aiot_lcd1602.move_to(10, 1)\n  aiot_lcd1602.putstr('')\n  aiot_lcd1602.move_to(10, 1)\n  aiot_lcd1602.putstr((str(aiot_dht20.dht20_humidity()) + '%'))\n\nevent_manager.add_timer_event(8000, on_event_timer_callback_v_e_W_T_X)\n\nif True:\n  display.scroll('IOT')\n  tiny_rgb.show(0, hex_to_rgb('#000000'))\n\nwhile True:\n  event_manager.run()\n  time.sleep_ms(1000)\n  time.sleep_ms(10)\n","name":"DADN","extensions":[{"id":"yolobit-AITT-VN-yolobit_extension_events","src":"https://github.com/AITT-VN/yolobit_extension_events","name":"SỰ KIỆN","description":"Mục mở rộng hỗ trợ sử dụng sự kiện trong chương trình"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"}],"device":"yolobit"}